<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Натальные карты и стихии</title>
  <script src= "app.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #fafafa;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }
    h2, h3 { margin: 5px 0; }
    .person-block {
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #fff;
      padding: 15px;
      width: 700px;
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }
    .info {
      flex: 1;
    }
    .element {
      font-weight: bold;
      margin: 5px 0 2px;
    }
    ul { margin: 0 0 10px; padding-left: 20px; }
    svg {
      flex: 1;
      width: 300px;
      height: 300px;
    }
    .planet-label {
      font-size: 10px;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    .zodiac-label {
      font-size: 12px;
      text-anchor: middle;
      dominant-baseline: middle;
      fill: black;
    }
  </style>
</head>
<body>
  <h2>Натальные карты и стихии</h2>
  <div id="results"></div>

<script>
const SVG_NS = "http://www.w3.org/2000/svg";

const zodiacNames = ["\u2648","\u2649","\u264A","\u264B","\u264C","\u264D","\u264E","\u264F","\u2650","\u2651","\u2652","\u2653"];
const zodiacElements = {
  0: "Огонь", 1: "Земля", 2: "Воздух", 3: "Вода",
  4: "Огонь", 5: "Земля", 6: "Воздух", 7: "Вода",
  8: "Огонь", 9: "Земля", 10: "Воздух", 11: "Вода"
};

const people = {
  "Sofia": [
    ['☉', 4, 24.1939], ['☽', 9, 15.1408], ['☿', 4, 8.795], ['♀', 5, 29.8444],
    ['♂', 1, 10.6378], ['♃', 6, 15.8164], ['♄', 4, 4.0261], ['♅', 11, 9.3778],
    ['♆', 10, 15.9778], ['♇', 8, 21.895], ['⚷', 9, 29.1489], ['⚸', 4, 12.3217],
    ['○', 5, 21.85], ['☊', 0, 14.9083], ['☋', 6, 14.9083]
  ],
  "Тима": [
    ['☉', 0, 19.2031], ['☽', 7, 0.5742], ['☿', 0, 4.7881], ['♀', 0, 3.9822],
    ['♂', 8, 23.3958], ['♃', 2, 9.0658], ['♄', 1, 28.6344], ['♅', 10, 23.8203],
    ['♆', 10, 8.4986], ['♇', 8, 15.1475], ['⚷', 8, 28.9225], ['⚸', 10, 14.8764],
    ['○', 10, 7.7978], ['☊', 3, 9.8794], ['☋', 9, 9.8794]
  ],
  "Evgeny": [
    ['☉', 7, 28.4], ['☽', 9, 6.28], ['☿', 8, 20.13], ['♀', 8, 20.38],
    ['♂', 11, 8.23], ['♃', 8, 13.2], ['♄', 2, 3.4], ['♅', 6, 16.58],
    ['♆', 8, 2.63], ['♇', 6, 1.5], ['☊', 10, 8.77], ['☋', 4, 8.77],
    ['⚸', 6, 19.37], ['⚷', 0, 9.75], ['○', 0, 22.68],
    ['ASC', 11, 14.8], ['DSC', 5, 14.8], ['IC', 2, 25.1], ['MC', 8, 25.1]
  ]
};

function toDegrees(sign, deg) {
  return sign * 30 + deg;
}

function analyzeElements(person) {
  const result = { Огонь: [], Земля: [], Воздух: [], Вода: [] };
  for (let [name, sign, deg] of people[person]) {
    const elem = zodiacElements[sign];
    result[elem].push(`${name} ${deg.toFixed(1)}°`);
  }
  return result;
}

function createSVG(person) {
  const size = 300, cx = size/2, cy = size/2, r1 = 100, r2 = 120;
  const svg = document.createElementNS(SVG_NS, "svg");
  svg.setAttribute("viewBox", `0 0 ${size} ${size}`);

  // круги
  const circle1 = document.createElementNS(SVG_NS, "circle");
  circle1.setAttribute("cx", cx);
  circle1.setAttribute("cy", cy);
  circle1.setAttribute("r", r1);
  circle1.setAttribute("fill", "none");
  circle1.setAttribute("stroke", "#ccc");
  svg.appendChild(circle1);

  const circle2 = document.createElementNS(SVG_NS, "circle");
  circle2.setAttribute("cx", cx);
  circle2.setAttribute("cy", cy);
  circle2.setAttribute("r", r2);
  circle2.setAttribute("fill", "none");
  circle2.setAttribute("stroke", "#ccc");
  svg.appendChild(circle2);

  // линии деления и знаки
  for (let i = 0; i < 12; i++) {
    const angle = (i*30 - 90) * Math.PI/180;
    const x1 = cx + r1*Math.cos(angle);
    const y1 = cy + r1*Math.sin(angle);
    const x2 = cx + r2*Math.cos(angle);
    const y2 = cy + r2*Math.sin(angle);

    const line = document.createElementNS(SVG_NS, "line");
    line.setAttribute("x1", x1);
    line.setAttribute("y1", y1);
    line.setAttribute("x2", x2);
    line.setAttribute("y2", y2);
    line.setAttribute("stroke", "black");
    svg.appendChild(line);

    const labelAngle = ((i*30+15)-90)*Math.PI/180;
    const lx = cx + (r2+15)*Math.cos(labelAngle);
    const ly = cy + (r2+15)*Math.sin(labelAngle);
    const text = document.createElementNS(SVG_NS, "text");
    text.setAttribute("x", lx);
    text.setAttribute("y", ly);
    text.setAttribute("class", "zodiac-label");
    text.textContent = zodiacNames[i];
    svg.appendChild(text);
  }

  // планеты
  for (let [name, sign, deg] of people[person]) {
    const d = toDegrees(sign, deg);
    const rad = (d-90)*Math.PI/180;
    const x = cx + r1 * 1.5 * Math.cos(rad);
    const y = cy + r1 * 1.5 * Math.sin(rad);

    const circle = document.createElementNS(SVG_NS, "circle");
    circle.setAttribute("cx", x);
    circle.setAttribute("cy", y);
    circle.setAttribute("r", 3);
    circle.setAttribute("fill", "red");
    svg.appendChild(circle);

    const text = document.createElementNS(SVG_NS, "text");
    text.setAttribute("x", x);
    text.setAttribute("y", y-10);
    text.setAttribute("class", "planet-label");
    text.textContent = name;
    svg.appendChild(text);
  }

  return svg;
}

function renderResults() {
  const container = document.getElementById("results");
  container.innerHTML = "";

  for (const person in people) {
    const block = document.createElement("div");
    block.className = "person-block";

    // инфо
    const info = document.createElement("div");
    info.className = "info";
    info.innerHTML = `<h3>${person}</h3>`;
    const elements = analyzeElements(person);
    for (const elem in elements) {
      const div = document.createElement("div");
      div.className = "element";
      div.textContent = elem;
      info.appendChild(div);

      const ul = document.createElement("ul");
      elements[elem].forEach(p => {
        const li = document.createElement("li");
        li.textContent = p;
        ul.appendChild(li);
      });
      info.appendChild(ul);
    }

    block.appendChild(info);
    block.appendChild(createSVG(person));
    container.appendChild(block);
  }
}

renderResults();
</script>
</body>
</html>
